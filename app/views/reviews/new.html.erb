<div class="row text-center page-title">
  <h1>New Product Review</h1>
  <hr>
</div>

<div class="row text-center">
  <div class="large-4 large-centered columns">
    <%= select_tag(:race_id, options_for_select(@race_options), placeholder: "Race") %>
  </div>
</div>

<% if current_user %>
  <div class="row text-center">
    <div class="large-4 large-centered columns">
      <%= form_for @review do |f| %>
        <h5>Product Details</h5>
        <%= fields_for @review.item do |i| %>
          <%= i.text_field(:type, placeholder: "Item Type") %>
          <%= i.text_field(:brand, placeholder: "Brand Name") %>
          <%= i.text_field(:model, placeholder: "Model Name") %>
          <%= i.text_field(:sex, placeholder: "M/F") %>
          <%= i.text_field(:image_path, { value: nil, placeholder: "Item Image URL" }) %>
        <% end %>
        <%= f.text_field(:rating, placeholder: "Rating (0-10)") %>
        <%= f.text_field(:comments, placeholder: "Comments") %>
        <hr>
        <h5>Select Race</h5>
        <%= select_tag(:race_id, options_for_select(@race_options), placeholder: "Race") %>
        <h5>or: New Race Details</h5>
        <%= fields_for @review.race do |r| %>
          <%= r.text_field(:name, placeholder: "Race Name") %>
          <%= r.text_field(:distance, placeholder: "Race Distance (e.g. '100 miles')") %>
          <%= r.text_field(:location, placeholder: "Race Location (e.g. 'Leadville, CO')") %>
          <%= r.text_field(:date, placeholder: "Race Date (e.g. '2016-07-10')") %>
        <% end %>
        <%= f.hidden_field(:user_id, value: @user.id) %>
        <%= f.submit "Submit Review", class: "callout button expanded" %>
      <% end %>
    </div>
  </div>
  
<% else %>
  <div class="row text-center">
    <h3>Please log in with Strava to submit a review.</h3>
    <hr>
  </div>
<% end %>